import os

environment = Environment(
    tools=['g++', 'gnulink'],
    CPPPATH=[os.path.join(os.environ['HOME'], 'include')],
    CXXFLAGS=['-Wall', '-Wundef', '-Wcast-align', '-Wredundant-decls', '-std=c++14'],
    LINKFLAGS=['-L{}'.format(p) for p in (os.path.join(os.environ['HOME'], 'Built', 'lib'), os.path.join(os.environ['HOME'], 'Built', 'lib64'))],
)

code_under_test = environment.Object( 'factorial_gmp.cpp')
check_program = environment.Program('factorial_gmp_test_check', ['factorial_gmp_test_check.cpp', code_under_test], LIBS=['gmpxx', 'gmp'])
rapidcheck_program = environment.Program('factorial_gmp_test_rapidcheck', ['factorial_gmp_test_rapidcheck.cpp', code_under_test], LIBS=['rapidcheck', 'gmpxx', 'gmp'])

Command('check', check_program, './$SOURCE')
Command('rapidcheck', rapidcheck_program, './$SOURCE')
